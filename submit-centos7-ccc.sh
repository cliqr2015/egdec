if [[ ! -z "$2" ]]; then
	deploymentName="Nov-$1"
	deploymentFolder="/Egor/testEnv2/$deploymentName"
	if [[ ! -z "$3" ]]; then BundleRepo="$3"; else BundleRepo="10.193.79.94"; fi
	curl -k -H "X-CLIQR-API-KEY-AUTH:true" -H "Content-Type:application/json" -u admin@cliqrtech.com,1:cliqr1 https://10.193.78.143/v2/jobs -d '{"appId":"66","appVersion":"3","name":"'$deploymentName'","metadatas":[{"namespace":"","name":"Name","value":"%JOB_NAME%","editable":false,"required":true}],"environmentId":"2","tagIds":[],"securityProfileIds":[],"agingPolicyId":null,"suspensionPolicyId":null,"policyIds":null,"preventTermination":false,"parameters":{"appParams":[{"name":"CCC_version","value":"'$2'"},{"name":"BundleRepo","value":"'$BundleRepo'"}],"cloudParams":{"cloudRegionId":"1","accountId":"1"}},"jobs":[{"tierId":"67","policyIds":null,"tagIds":[],"securityProfileIds":[],"parameters":{"appParams":[{"name":"referredJob","value":""},{"name":"SSHPreference","value":"NO_PREFERENCE"}],"envParams":[],"cloudParams":{"cloudRegionId":"1","accountId":"1","volumes":[],"rootVolumeSize":"0","cloudProperties":[{"name":"FullClone","value":"false"},{"name":"UserDatastoreCluster","value":""},{"name":"UserDataCenterName","value":"DC1"},{"name":"UserClusterName","value":"Sustaining"},{"name":"UserDatastore","value":"datastore1-10.193.72.185"},{"name":"UserResourcePoolName","value":""},{"name":"UserTargetDeploymentFolder","value":"'$deploymentFolder'"},{"name":"CC_AUTO_SELECT_NETWORK","value":false},{"name":"numNICs","value":""},{"name":"externalNetwork","value":""},{"name":"serviceGraphTemplate","value":""}],"nics":[{}]}}},{"tierId":"68","policyIds":null,"tagIds":[],"securityProfileIds":[],"parameters":{"appParams":[{"name":"referredJob","value":""}],"envParams":[],"cloudParams":{"cloudRegionId":"1","accountId":"1","volumes":[{"name":"RootVolume","bootable":true,"size":"","type":null,"iops":null}],"rootVolumeSize":"0","cloudProperties":[{"name":"FullClone","value":"false"},{"name":"UserDatastoreCluster","value":""},{"name":"UserDataCenterName","value":"DC1"},{"name":"UserClusterName","value":"Sustaining"},{"name":"UserDatastore","value":"datastore1-10.193.72.185"},{"name":"UserResourcePoolName","value":""},{"name":"UserTargetDeploymentFolder","value":"'$deploymentFolder'"},{"name":"CC_AUTO_SELECT_NETWORK","value":false},{"name":"numNICs","value":""}],"nics":[{"order":1,"id":"VM Network","type":"NETWORK"}],"instance":"amqp.medium"}}},{"tierId":"69","policyIds":null,"tagIds":[],"securityProfileIds":[],"parameters":{"appParams":[{"name":"referredJob","value":""}],"envParams":[],"cloudParams":{"cloudRegionId":"1","accountId":"1","volumes":[{"name":"RootVolume","bootable":true,"size":"","type":null,"iops":null}],"rootVolumeSize":"0","cloudProperties":[{"name":"FullClone","value":"false"},{"name":"UserDatastoreCluster","value":""},{"name":"UserDataCenterName","value":"DC1"},{"name":"UserClusterName","value":"Sustaining"},{"name":"UserDatastore","value":"datastore1-10.193.72.185"},{"name":"UserResourcePoolName","value":""},{"name":"UserTargetDeploymentFolder","value":"'$deploymentFolder'"},{"name":"CC_AUTO_SELECT_NETWORK","value":false},{"name":"numNICs","value":""}],"nics":[{"order":1,"id":"VM Network","type":"NETWORK"}],"instance":"ccm.large"}}},{"tierId":"70","policyIds":null,"tagIds":[],"securityProfileIds":[],"parameters":{"appParams":[{"name":"referredJob","value":""}],"envParams":[],"cloudParams":{"cloudRegionId":"1","accountId":"1","volumes":[{"name":"RootVolume","bootable":true,"size":"","type":null,"iops":null}],"rootVolumeSize":"0","cloudProperties":[{"name":"FullClone","value":"false"},{"name":"UserDatastoreCluster","value":""},{"name":"UserDataCenterName","value":"DC1"},{"name":"UserClusterName","value":"Sustaining"},{"name":"UserDatastore","value":"datastore1-10.193.72.185"},{"name":"UserResourcePoolName","value":""},{"name":"UserTargetDeploymentFolder","value":"'$deploymentFolder'"},{"name":"CC_AUTO_SELECT_NETWORK","value":false},{"name":"numNICs","value":""}],"nics":[{"order":1,"id":"VM Network","type":"NETWORK"}],"instance":"amqp.medium"}}},{"tierId":"71","policyIds":null,"tagIds":[],"securityProfileIds":[],"parameters":{"appParams":[{"name":"referredJob","value":""}],"envParams":[],"cloudParams":{"cloudRegionId":"1","accountId":"1","volumes":[{"name":"RootVolume","bootable":true,"size":"","type":null,"iops":null}],"rootVolumeSize":"0","cloudProperties":[{"name":"FullClone","value":"false"},{"name":"UserDatastoreCluster","value":""},{"name":"UserDataCenterName","value":"DC1"},{"name":"UserClusterName","value":"Sustaining"},{"name":"UserDatastore","value":"datastore1-10.193.72.185"},{"name":"UserResourcePoolName","value":""},{"name":"UserTargetDeploymentFolder","value":"'$deploymentFolder'"},{"name":"CC_AUTO_SELECT_NETWORK","value":false},{"name":"numNICs","value":""}],"nics":[{"order":1,"id":"VM Network","type":"NETWORK"}],"instance":"amqp.medium"}}}],"timeZone":"GMT-07:00"}';
else
	echo "Enter CCC version and destination foldre for "$1"!";
fi
